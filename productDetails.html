<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Details</title>
    <!-- Boxicons -->
    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    <!-- Fontawesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <!-- Custom StyleSheet -->
    <link rel="stylesheet" href="./css/styles.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-polyfills/0.1.43/polyfill.min.js"></script>

</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="navigation container">
            <div class="logo">
                <h1 >Electroniks</h1>
            </div>

            <div class="menu">
                <div class="top-nav">
                    <div class="logo">
                        <h1>Electroniks</h1>
                    </div>
                    <div class="close">
                        <i class="bx bx-x"></i>
                    </div>
                </div>

                <ul class="nav-list">
                    <li class="nav-item">
                        <a href="index.html" class="nav-link">Home</a>
                    </li>
                    <li class="nav-item">
                        <a href="product.html" class="nav-link">Products</a>
                    </li>
                    <li class="nav-item">
                        <a href="#about" class="nav-link">About</a>
                    </li>
                    <li class="nav-item">
                        <a href="#contact" class="nav-link">Contact</a>
                    </li>
                    <li class="nav-item">
                        <a href="#account" class="nav-link">Account</a>
                    </li>
                    <li class="nav-item">
                        <a href="cart.html" class="nav-link icon"><i class="bx bx-shopping-bag"></i></a>
                    </li>
                </ul>
            </div>

            <a href="cart.html" class="cart-icon">
                <i class="bx bx-shopping-bag"></i>
            </a>

            <div class="hamburger">
                <i class="bx bx-menu"></i>
            </div>
        </div>
    </nav>

    <!-- Product Details -->
    <section class="section product-detail">
        <div class="details container">
            <div id="product-details">
                <!-- Product details will be dynamically inserted here -->
            </div>
        </div>
    </section>

    <!-- Related Products -->
        <div class="top container">
            <h1>Related Products</h1>
            <a href="#" class="view-more">View more</a>
        </div>
        <div class="product-center container">
            <!-- Related products can be added here -->
        </div>
    </section>

   
    <!-- Custom Scripts -->
    <script src="./js/index.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get the product ID from the URL
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id');
            

            // Fetch product details
            const productDetails = getProductDetails(productId);

            // Update the DOM with product details
            const detailsContainer = document.getElementById('product-details');
            detailsContainer.innerHTML = `
                <div class="left image-container">
                    <div class="main">
                        <img src="${productDetails.image}" alt="${productDetails.name}" id="zoom">
                    </div>
                </div>
                <div class="right">
                    <span>${productDetails.category}</span>
                    <h1>${productDetails.name}</h1>
                    <div class="price">${productDetails.price}</div>
                    <form id="add-to-cart-form">
                        <input type="number" id="quantity" name="quantity" value="1" min="1">
                        <button type="submit" class="addCart">Add To Cart</button>
                    </form>
                    <h3>Product Detail</h3>
                    <p>${productDetails.description}</p>
                </div>
            `;

            const addToCartForm = document.getElementById('add-to-cart-form');
            addToCartForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const quantity = document.getElementById('quantity').value;
                addToCart(productId, quantity);
            });
        });

        // Function to get product details
        function getProductDetails(productId) {
            const products = {
                '1': {
                    name: 'Hiletgo RAMPS 1.4 control Panel 3D',
                    category: 'ACCESSORIES',
                    price: 'Ksh 5000/=',
                    image: './images/product-6.png',
                    description: 'The Hiletgo RAMPS 1.4 control Panel 3D is a versatile and essential component for 3D printing enthusiasts. It offers precise control and seamless integration with various 3D printer setups.'
                },
                '2': {
                    name: 'Arduino Camera OV7670',
                    category: 'ACCESSORIES',
                    price: 'Ksh 1,000/=',
                    image: './images/product-7.png',
                    description: 'The Arduino Camera OV7670 is a compact and powerful camera module perfect for Arduino projects. It enables high-quality image capture and processing for various applications.'
                },
                '3': {
                    name: 'Raspberry pi DD4 Processor',
                    category: 'RASPBERRY PI',
                    price: 'Ksh 5,699/=',
                    image: './images/product-5.png',
                    description: 'The Raspberry pi DD4 Processor offers enhanced performance for your Raspberry Pi projects. It provides faster processing speeds and improved efficiency for demanding applications.'
                },
                '4': {
                    name: 'Raspberry Pi Simulator kit',
                    category: 'RASPBERRY PI',
                    price: 'kSH 10,999/=',
                    image: './images/product-4.png',
                    description: 'The Raspberry Pi Simulator kit is an all-in-one solution for learning and experimenting with Raspberry Pi. It includes everything you need to simulate and test Raspberry Pi projects in a controlled environment.'
                },
                '5': {
                    name: 'Arduino Uno R3 proccesor',
                    category: 'ARDUINO',
                    price: 'Ksh 5,399/=',
                    image: './images/product-3.png',
                    description: 'The Arduino Uno R3 processor is the heart of many Arduino projects. It offers reliable performance and compatibility with a wide range of shields and accessories.'
                },
                '6': {
                    name: 'Generic Raspberry pi Nucleo',
                    category: 'RASPBERRY PI',
                    price: 'Ksh 3,000/=',
                    image: './images/product-2.png',
                    description: 'The Generic Raspberry pi Nucleo is a cost-effective solution for Raspberry Pi enthusiasts. It provides essential functionality for various Raspberry Pi projects at an affordable price point.'
                },
                '7': {
                    name: '1602 LCD Display - Adapter Board',
                    category: 'ARDUINO',
                    price: 'Ksh 2599/=',
                    image: './images/product-1.png',
                    description: 'The 1602 LCD Display with Adapter Board is perfect for adding visual output to your Arduino projects. It offers clear text display and easy integration with Arduino boards.'
                },
                '8': {
                    name: 'Raspberry pi DD4 Processor',
                    category: 'RASPBERRY PI',
                    price: 'Ksh 5,699/=',
                    image: './images/product-5.png',
                    description: 'Another variant of the Raspberry pi DD4 Processor, offering the same enhanced performance for your Raspberry Pi projects with fast processing speeds and improved efficiency.'
                }
            };
            return products[productId] || { name: 'Product Not Found', category: '', price: '', image: '', description: 'Product details not available.' };
        }

        function addToCart(productId, quantity) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            const product = getProductDetails(productId);
            const existingProductIndex = cart.findIndex(item => item.id === productId);

            if (existingProductIndex !== -1) {
                cart[existingProductIndex].quantity += parseInt(quantity);
            } else {
                cart.push({
                    id: productId,
                    name: product.name,
                    price: parseFloat(product.price.replace('Ksh ', '').replace(',', '')),
                    quantity: parseInt(quantity)
                });
            }

            localStorage.setItem('cart', JSON.stringify(cart));
            alert('Product added to cart!');
            updateCartIcon();
        }

        function updateCartIcon() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const cartIcon = document.querySelector('.cart-icon');
            cartIcon.innerHTML = `<i class="bx bx-shopping-bag"></i><span>${totalItems}</span>`;
        }

        // Call updateCartIcon on page load
        updateCartIcon();
    </script>
</body>
</html>